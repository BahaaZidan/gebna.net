type Query {
	viewer: User
	node(id: ID!): Node
}

type Mutation {
	assignTargetMailbox(input: AssignTargetMailboxInput!): AddressProfile
}

input AssignTargetMailboxInput {
	addressProfileID: ID!
	targetMailboxType: MailboxType!
}

type User implements Node {
	id: ID!
	username: String!
	name: String!
	avatar: String!
	mailbox(type: MailboxType!): Mailbox
}

type Mailbox implements Node {
	id: ID!
	type: MailboxType!
	name: String!
	threads(first: Int, after: String, filter: ThreadsFilter): ThreadsConnection!
	unreadThreadsCount: Int!
}

enum MailboxType {
	screener
	important
	news
	transactional
	trash
}

input ThreadsFilter {
	unread: Boolean!
}

type ThreadsConnection implements Connection {
	pageInfo: PageInfo!
	edges: [ThreadEdge!]!
}

type ThreadEdge implements Edge {
	cursor: String
	node: Thread!
}

type Thread implements Node {
	id: ID!
	from: AddressProfile!
	unreadMessagesCount: Int!
	title: String
	snippet: String
	lastMessageAt: DateTime!
	messages: [Message!]!
}

type Message implements Node {
	id: ID!
	from: AddressProfile!
	unread: Boolean!
	recievedAt: DateTime!
	subject: String
	to: [String!]
	cc: [String!]
	replyTo: [String!]
	snippet: String
	bodyText: String
	bodyHTML: String
	attachments: [Attachment!]!
}

type AddressProfile implements Node {
	id: ID!
	address: String!
	name: String!
	avatar: String!
	targetMailbox: Mailbox!
}

type Attachment implements Node {
	id: ID!
	fileName: String
	mimeType: String
	contentId: String
	downloadURL: URL
}

interface Connection {
	pageInfo: PageInfo!
	edges: [Edge!]!
}

type PageInfo {
	startCursor: String
	endCursor: String
	hasNextPage: Boolean
	hasPreviousPage: Boolean
}

interface Edge {
	cursor: String
	node: Node!
}

interface Node {
	id: ID!
}

scalar DateTime
scalar URL
